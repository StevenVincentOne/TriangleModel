<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Intelligent System Model</title>
    <link rel="stylesheet" href="https://cdn.replit.com/agent/bootstrap-agent-dark-theme.min.css">
    <link rel="stylesheet" href="styles.css">
    
    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <div class="container">
        <h1 class="title text-center mb-2">Intelligent System Model</h1>

        <!-- Visualization container -->
        <div class="visualization-container">
            

            <!-- Manual Controls (at top) -->
            <div id="manual-controls">
                <div class="manual-controls-container">
                    <!-- NC Group -->
                    <div class="nc-group">
                        <label>Set Manual:</label>
                        <div class="manual-input-group">
                            <label for="manual-nc1">NC1</label>
                            <input id="manual-nc1" type="text" class="manual-input" maxlength="6">
                        </div>
                        <div class="manual-input-group">
                            <label for="manual-nc2">NC2</label>
                            <input id="manual-nc2" type="text" class="manual-input" maxlength="6">
                        </div>
                        <div class="manual-input-group">
                            <label for="manual-nc3">NC3</label>
                            <input id="manual-nc3" type="text" class="manual-input" maxlength="6">
                        </div>
                    </div>

                    <!-- Checkbox Group -->
                    <div class="control-group">
                        <div class="checkbox-group">
                            <div class="form-check">
                                <input type="checkbox" id="applyToStart" checked>
                                <label for="applyToStart">Start</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" id="applyToEnd">
                                <label for="applyToEnd">End</label>
                            </div>
                            <button id="apply-manual" class="btn btn-info">Apply NC</button>
                        </div>
                    </div>

                    <!-- IC Group -->
                    <div class="ic-group">
                        <div class="manual-input-group">
                            <label for="manual-ic1">IC1</label>
                            <input id="manual-ic1" type="text" class="manual-input" maxlength="6">
                        </div>
                        <div class="manual-input-group">
                            <label for="manual-ic2">IC2</label>
                            <input id="manual-ic2" type="text" class="manual-input" maxlength="6">
                        </div>
                        <div class="manual-input-group">
                            <label for="manual-ic3">IC3</label>
                            <input id="manual-ic3" type="text" class="manual-input" maxlength="6">
                        </div>
                        <button id="apply-manual-ic" class="btn btn-info">Apply IC</button>
                    </div>
                </div>
            </div>

            <!-- Preset buttons and dropdowns container -->
            <div class="preset-buttons-container">
                <!-- Standard preset buttons -->
                <button id="equilateral" class="btn btn-secondary btn-sm">Equilateral</button>
                <button id="isosceles" class="btn btn-secondary btn-sm">Isosceles</button>
                <button id="scalene" class="btn btn-secondary btn-sm">Scalene</button>
                <button id="right" class="btn btn-secondary btn-sm">Right</button>
                <button id="acute" class="btn btn-secondary btn-sm">Acute</button>
                <button id="obtuse" class="btn btn-secondary btn-sm">Obtuse</button>
                
                <!-- Add Save button -->
                <button id="save-preset" class="btn btn-success btn-sm">Save Preset</button>
                
                <!-- Moved dropdowns -->
                <div class="dropdown">
                    <button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="userPresetsDropdown" data-bs-toggle="dropdown">
                        User Presets
                    </button>
                    <ul class="dropdown-menu" id="userPresetsList">
                        <!-- User presets will be added here dynamically -->
                    </ul>
                </div>
                <div class="dropdown">
                    <button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="animationsDropdown" data-bs-toggle="dropdown">
                        Animations
                    </button>
                    <ul class="dropdown-menu" id="animationsList">
                        <!-- Animations will be added here dynamically -->
                    </ul>
                </div>
            </div>
            <!-- Info Box Container -->
            <div class="info-box-container">
                <!-- First Metric -->
                <div class="info-search-container">
                    <input type="text" id="info-search-1" class="form-control" placeholder="Search...">
                    <div id="search-results-1" class="search-results-dropdown"></div>
                </div>
                <div class="info-display">
                    <input id="info-display-value-1" type="text" readonly>
                </div>

                <!-- Second Metric -->
                <div class="info-search-container">
                    <input type="text" id="info-search-2" class="form-control" placeholder="Search...">
                    <div id="search-results-2" class="search-results-dropdown"></div>
                </div>
                <div class="info-display">
                    <input id="info-display-value-2" type="text" readonly>
                </div>

                <!-- Third Metric -->
                <div class="info-search-container">
                    <input type="text" id="info-search-3" class="form-control" placeholder="Search...">
                    <div id="search-results-3" class="search-results-dropdown"></div>
                </div>
                <div class="info-display">
                    <input id="info-display-value-3" type="text" readonly>
                </div>

                <!-- Single Update Button -->
                <button id="info-display-update" class="btn btn-info btn-sm">Update</button>
            </div>

            <!-- Canvas and Animation Controls -->
            <div class="d-flex align-items-start gap-2">
                <!-- Left Animation Panel -->
                <div class="animation-panel bg-dark p-2 rounded">
                    <div class="animation-inputs-grid">
                        <div class="grid-header">Start</div>
                        <div class="grid-header">End</div>
                        
                        <input id="animation-nc1-start" type="text" class="form-control compact-input" maxlength="6">
                        <input id="animation-nc1-end" type="text" class="form-control compact-input" maxlength="6">
                        
                        <input id="animation-nc2-start" type="text" class="form-control compact-input" maxlength="6">
                        <input id="animation-nc2-end" type="text" class="form-control compact-input" maxlength="6">
                        
                        <input id="animation-nc3-start" type="text" class="form-control compact-input" maxlength="6">
                        <input id="animation-nc3-end" type="text" class="form-control compact-input" maxlength="6">
                    </div>
                    
                    <!-- Animation Controls -->
                    <div class="animation-controls mt-2">
                        <div class="controls-row">
                            <button id="animate-button-end" class="btn btn-info btn-sm">Animate</button>
                            <button id="save-animation-end" class="btn btn-info btn-sm">Save</button>
                        </div>
                        <div class="controls-row">
                            <input type="checkbox" id="animation-loop" class="form-check-input">
                            <label for="animation-loop" class="form-check-label">Loop</label>
                        </div>
                    </div>

                    <!-- System Intelligence Inputs -->
                    <div class="system-intelligence-inputs mt-3">
                        <div class="input-row">
                            <label for="system-d">Total Data (D)</label>
                            <input type="text" id="system-d" readonly>
                        </div>
                        <div class="input-row">
                            <label for="system-net-d">Net D</label>
                            <input type="text" id="system-net-d" readonly>
                        </div>
                        <div class="input-row">
                            <label for="system-converted">Converted D</label>
                            <input type="text" id="system-converted" readonly>
                        </div>
                        <div class="input-row">
                            <label for="system-b">Bits (B)</label>
                            <input type="text" id="system-b" readonly>
                        </div>
                        <div class="input-row">
                            <label for="system-n">Noise (N)</label>
                            <input type="text" id="system-n" readonly>
                        </div>
                        <div class="input-row">
                            <label for="system-bn-ratio">B/N</label>
                            <input type="text" id="system-bn-ratio" readonly>
                        </div>
                        <div class="input-row">
                            <label for="flow-rate">D Flow</label>
                            <input type="number" id="flow-rate" min="1" max="100" value="10">
                        </div>
                        <div class="input-row">
                            <label for="loss-rate">D Loss %</label>
                            <input type="number" id="loss-rate" min="0" max="100" value="0">
                        </div>
                        <div class="input-row">
                            <label for="data-reduction">B Convert Rate</label>
                            <input type="number" 
                                   id="data-reduction" 
                                   min="0" 
                                   max="100" 
                                   step="0.1"> 
                                  
                        </div>
                        <div class="input-row">
                            <label for="system-en">EN</label>
                            <input type="text" id="system-en" readonly>
                        </div>
                        <div class="input-row">
                            <label for="en-flow-rate">EN Flow</label>
                            <input type="number" id="en-flow-rate" min="0" max="100" value="0">
                        </div>
                    </div>
                </div>

                <!-- Canvas (Center) -->
                <div id="canvas-container" class="bg-dark p-2 rounded">
                    <canvas id="canvas"></canvas>
                </div>

                <!-- Right Controls Panel -->
                <div class="controls-panel bg-dark p-2 rounded">
                    <!-- Data Management Section -->
                    <div class="data-controls-section">
                        <button id="saveState" class="btn btn-primary btn-sm w-100 mb-2">Save State</button>
                        <button id="exportImage" class="btn btn-primary btn-sm w-100 mb-2">Export Image</button>
                        <button id="exportData" class="btn btn-primary btn-sm w-100 mb-2">Export Data</button>
                        <button id="importButton" class="btn btn-primary btn-sm w-100">Import Data</button>
                        <input type="file" id="importFile" style="display: none;" accept=".csv">
                    </div>
                    
                    <!-- System Controls Section -->
                    <div class="data-controls-section">
                        <button id="letterFlowToggle" class="btn btn-primary btn-sm w-100 mb-2">Start Flow</button>
                        <button id="intelligenceToggle" class="btn btn-primary btn-sm w-100 mb-2">
                            Intelligence
                            <span class="status-icon-off">✖️</span>
                            <span class="status-icon-on">✔️</span>
                        </button>
                        <button id="zeroDataButton" class="btn btn-primary btn-sm w-100">Zero Data</button>
                    </div>
                </div>
            </div>
            
            

            <!-- Add this section after the canvas and animation controls -->
            <div class="d-flex justify-content-center gap-2 mt-3">
                <!-- Feature Toggle Buttons -->
                <div class="feature-buttons-container d-flex flex-column align-items-center gap-2">
                    <!-- Centers Row -->
                    <div class="d-flex flex-wrap justify-content-center gap-2">
                        <button id="toggleCentroid" class="btn btn-secondary btn-sm">Centroid</button>
                        <button id="toggleIncenter" class="btn btn-secondary btn-sm">Incenter</button>
                        <button id="toggleCircumcenter" class="btn btn-secondary btn-sm">Circumcenter</button>
                        <button id="toggleNinePointCenter" class="btn btn-secondary btn-sm">Nine-Point Center</button>
                        <button id="toggleSubcenter" class="btn btn-secondary btn-sm">Subcenter</button>
                        <button id="toggleOrthocenter" class="btn btn-secondary btn-sm">Orthocenter</button>
                        <button id="toggleEuler" class="btn btn-secondary btn-sm">Euler</button>
                    </div>
                    
                    <!-- Circles Row -->
                    <div class="d-flex flex-wrap justify-content-center gap-2">
                        <button id="toggleIncircle" class="btn btn-secondary btn-sm">Incircle</button>
                        <button id="toggleCircumcircle" class="btn btn-secondary btn-sm">Circumcircle</button>
                        <button id="toggleNinePointCircle" class="btn btn-secondary btn-sm">Nine-Point Circle</button>
                        <button id="toggleSubcircle" class="btn btn-secondary btn-sm">Subcircle</button>
                        <button id="toggleSubtriangle" class="btn btn-secondary btn-sm">Subtriangle</button>
                        <button id="toggleSubsystems" class="btn btn-secondary btn-sm">Subsystems</button>
                    </div>

                    <!-- Other Features Row -->
                    <div class="d-flex flex-wrap justify-content-center gap-2">
                        <button id="toggleTangents" class="btn btn-secondary btn-sm">Tangents</button>
                        <button id="toggleMidpoints" class="btn btn-secondary btn-sm">Midpoints</button>
                        <button id="toggleIC" class="btn btn-secondary btn-sm">I-Channels</button>
                        <button id="toggleMedians" class="btn btn-secondary btn-sm">Medians</button>
                        <button id="toggleAltitudes" class="btn btn-secondary btn-sm">Altitudes</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Dashboard container -->
        <div class="dashboard-container">
            

            <!-- System Panel -->
                <div class="dashboard-panel">
                    <h3 class="panel-header">System</h3>
                    <div class="panel-row">  <!-- Changed to panel-row for horizontal alignment -->
                        <!-- Nodes Panel -->
                        <div class="dashboard-panel">
                            <h3 class="panel-header">Nodes</h3>
                            <div class="panel-row">
                                <!-- Angles Column -->
                                <div class="value-column">
                                    <div class="label-value-pair">
                                        <label for="node-n1-angle">N1 ∠</label>
                                        <input id="node-n1-angle" type="text" class="form-control" readonly>
                                    </div>
                                    <div class="label-value-pair">
                                        <label for="node-n2-angle">N2 ∠</label>
                                        <input id="node-n2-angle" type="text" class="form-control" readonly>
                                    </div>
                                    <div class="label-value-pair">
                                        <label for="node-n3-angle">N3 ∠</label>
                                        <input id="node-n3-angle" type="text" class="form-control" readonly>
                                    </div>
                                </div>
                                
                                <!-- Coordinates Column -->
                                <div class="value-column">
                                    <div class="label-value-pair">
                                        <label for="node1-coords">N1 (xy)</label>
                                        <input id="node1-coords" type="text" class="form-control coordinate-input" readonly>
                                    </div>
                                    <div class="label-value-pair">
                                        <label for="node2-coords">N2 (xy)</label>
                                        <input id="node2-coords" type="text" class="form-control coordinate-input" readonly>
                                    </div>
                                    <div class="label-value-pair">
                                        <label for="node3-coords">N3 (xy)</label>
                                        <input id="node3-coords" type="text" class="form-control coordinate-input" readonly>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Node Channels Panel -->
                        <div class="dashboard-panel">
                            <h3 class="panel-header">Node Channels</h3>
                            <div class="panel-content">
                                <div class="label-value-pair">
                                    <label for="channel-1">NC1</label>
                                    <input id="channel-1" type="text" class="form-control" size="8" readonly>
                                </div>
                                <div class="label-value-pair">
                                    <label for="channel-2">NC2</label>
                                    <input id="channel-2" type="text" class="form-control" size="8" readonly>
                                </div>
                                <div class="label-value-pair">
                                    <label for="channel-3">NC3</label>
                                    <input id="channel-3" type="text" class="form-control" size="8" readonly>
                                </div>
                            </div>
                        </div>
                        <!-- I-Channels Panel -->
                        <div class="dashboard-panel">
                            <h3 class="panel-header">I-Channels</h3>
                            <div class="panel-content">
                                <div class="label-value-pair">
                                    <label for="ic-1">IC1</label>
                                    <input id="ic-1" type="text" class="form-control" size="8" readonly>
                                </div>
                                <div class="label-value-pair">
                                    <label for="ic-2">IC2</label>
                                    <input id="ic-2" type="text" class="form-control" size="8" readonly>
                                </div>
                                <div class="label-value-pair">
                                    <label for="ic-3">IC3</label>
                                    <input id="ic-3" type="text" class="form-control" size="8" readonly>
                                </div>
                            </div>
                        </div>

                        <!-- Medians Panel -->
                        <div class="dashboard-panel">
                            <h3 class="panel-header">Medians</h3>
                            <div class="panel-content">
                                <div class="panel-row">  <!-- Container for the two columns -->
                                    <!-- Midpoints Column -->
                                    <div class="value-column">
                                        <div class="label-value-pair">
                                            <label>M1 (xy)</label>
                                            <input id="mid1-coords" type="text" class="coordinate-input" readonly>
                                        </div>
                                        <div class="label-value-pair">
                                            <label>M2 (xy)</label>
                                            <input id="mid2-coords" type="text" class="coordinate-input" readonly>
                                        </div>
                                        <div class="label-value-pair">
                                            <label>M3 (xy)</label>
                                            <input id="mid3-coords" type="text" class="coordinate-input" readonly>
                                        </div>
                                    </div>

                                    <!-- Median Lengths Column -->
                                    <div class="value-column">
                                        <div class="label-value-pair">
                                            <label>ml1</label>
                                            <input id="median1-length" type="text" readonly>
                                        </div>
                                        <div class="label-value-pair">
                                            <label>ml2</label>
                                            <input id="median2-length" type="text" readonly>
                                        </div>
                                        <div class="label-value-pair">
                                            <label>ml3</label>
                                            <input id="median3-length" type="text" readonly>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Altitudes panel -->
                        <div class="dashboard-panel">
                            <h3 class="panel-header">Altitudes</h3>
                            <div class="panel-content">
                                <div class="panel-row">  <!-- Container for the two columns -->
                                    <!-- Altitude Feet Positions Column -->
                                    <div class="value-column">
                                        <div class="label-value-pair">
                                            <label>Af1 (xy)</label>
                                            <input id="altitude1-coords" type="text" class="coordinate-input" readonly>
                                        </div>
                                        <div class="label-value-pair">
                                            <label>Af2 (xy)</label>
                                            <input id="altitude2-coords" type="text" class="coordinate-input" readonly>
                                        </div>
                                        <div class="label-value-pair">
                                            <label>Af3 (xy)</label>
                                            <input id="altitude3-coords" type="text" class="coordinate-input" readonly>
                                        </div>
                                    </div>

                                    <!-- Altitude Lengths Column -->
                                    <div class="value-column">
                                        <div class="label-value-pair">
                                            <label>Al1</label>
                                            <input id="altitude1-length" type="text" readonly>
                                        </div>
                                        <div class="label-value-pair">
                                            <label>Al2</label>
                                            <input id="altitude2-length" type="text" readonly>
                                        </div>
                                        <div class="label-value-pair">
                                            <label>Al3</label>
                                            <input id="altitude3-length" type="text" readonly>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            <!-- System Entropy and Capacity Panel -->
            <div class="dashboard-panel">
                <h3 class="panel-header">System Entropy and Capacity</h3>
                <div class="panel-content">
                    <!-- Main Values Section -->
                    <div class="value-section">
                        <div class="panel-row">
                            <div class="label-value-pair">
                                <label>H</label>
                                <input id="system-h" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label>HP</label>
                                <input id="system-sph" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label>HIC</label>
                                <input id="system-mch" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label>C</label>
                                <input id="system-c" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="sh-b-ratio">H/C</label>
                                <input id="sh-b-ratio" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="b-sh-ratio">C/H</label>
                                <input id="b-sh-ratio" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="sph-area-ratio">HP/C</label>
                                <input id="sph-area-ratio" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="b-sph-ratio">C/HP</label>
                                <input id="b-sph-ratio" type="text" readonly>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Primary Ratios Section -->
                    <div class="value-section">
                        <div class="panel-row">
                            
                            <div class="label-value-pair">
                                <label for="mch-b-ratio">HIC/C</label>
                                <input id="mch-b-ratio" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="b-mch-ratio">C/HIC</label>
                                <input id="b-mch-ratio" type="text" readonly>
                            <div>
                        </div>
                    </div>

                    <!-- Secondary Ratios Section -->
                    <div class="value-section">
                        <div class="panel-row">
                            <div class="label-value-pair">
                                <label for="hp-hic-ratio">HP/HIC</label>
                                <input id="hp-hic-ratio" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="hic-hp-ratio">HIC/HP</label>
                                <input id="hic-hp-ratio" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="hp-h-ratio">HP/H</label>
                                <input id="hp-h-ratio" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="h-hp-ratio">H/HP</label>
                                <input id="h-hp-ratio" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="hic-h-ratio">HIC/H</label>
                                <input id="hic-h-ratio" type="text" readonly>
                            </div>
                            <div class="label-value-pair">
                                <label for="h-hic-ratio">H/HIC</label>
                                <input id="h-hic-ratio" type="text" readonly>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

        <!-- Subsystems Panel -->
        <div class="dashboard-panel">
            <h3 class="panel-header">Subsystems</h3>
            <div class="panel-content subsystems-grid">
                <!-- SS1 Row -->
                <div class="subsystem-row">
                    <div class="label-value-pair">
                        <label>ss∠1</label>
                        <input id="subsystem-1-angle" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssh1</label>
                        <input id="subsystem-1-perimeter" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssc1</label>
                        <input id="subsystem-1-area" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssh/ssc1</label>
                        <input id="subsystem-1-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssc/ssh1</label>
                        <input id="subsystem-1-inverse-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssh/H1</label>
                        <input id="subsystem-1-system-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>H/ssh1</label>
                        <input id="subsystem-1-entropy-ratio" type="text" readonly>
                    </div>
                </div>

                <!-- SS2 Row -->
                <div class="subsystem-row">
                    <div class="label-value-pair">
                        <label>ss∠2</label>
                        <input id="subsystem-2-angle" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssh2</label>
                        <input id="subsystem-2-perimeter" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssc2</label>
                        <input id="subsystem-2-area" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssh/ssc2</label>
                        <input id="subsystem-2-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssc/ssh2</label>
                        <input id="subsystem-2-inverse-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssh/H2</label>
                        <input id="subsystem-2-system-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>H/ssh2</label>
                        <input id="subsystem-2-entropy-ratio" type="text" readonly>
                    </div>
                </div>

                <!-- SS3 Row -->
                <div class="subsystem-row">
                    <div class="label-value-pair">
                        <label>ss∠3</label>
                        <input id="subsystem-3-angle" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssh3</label>
                        <input id="subsystem-3-perimeter" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssc3</label>
                        <input id="subsystem-3-area" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssh/ssc3</label>
                        <input id="subsystem-3-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssc/ssh3</label>
                        <input id="subsystem-3-inverse-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>ssh/H3</label>
                        <input id="subsystem-3-system-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>H/ssh3</label>
                        <input id="subsystem-3-entropy-ratio" type="text" readonly>
                    </div>
                </div>
            </div>
        </div>
        
        
        <!-- Subtriangle Panel -->
        <div class="dashboard-panel">
            <h3 class="panel-header">Subtriangle</h3>
            
            <div class="panel-content">
                <!-- Nodes and Channels Row -->
                <div class="subtriangle-section">
                    <h4 class="section-header">Nodes and Channels</h4>
                    <div class="nodes-channels-row">
                        <div class="label-value-pair">
                            <label>ssi1 (xy)</label>
                            <input id="subsystem-1-centroid" type="text" class="coordinate-input" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>ssi2 (xy)</label>
                            <input id="subsystem-2-centroid" type="text" class="coordinate-input" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>ssi3 (xy)</label>
                            <input id="subsystem-3-centroid" type="text" class="coordinate-input" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>stc1</label>
                            <input id="subchannel-1" type="text" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>stc2</label>
                            <input id="subchannel-2" type="text" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>stc3</label>
                            <input id="subchannel-3" type="text" readonly>
                        </div>
                    </div>
                </div>

                <!-- Entropy and Capacity Row -->
                <div class="subtriangle-section">
                    <h4 class="section-header">Entropy and Capacity</h4>
                    <div class="entropy-capacity-row">
                        <div class="label-value-pair">
                            <label>hst</label>
                            <input id="subtriangle-hst" type="text" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>cst</label>
                            <input id="subtriangle-cst" type="text" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>hst/cst</label>
                            <input id="hst-cst-ratio" type="text" readonly>
                        </div>
                        <div class="label-value-pair">
                            <label>cst/hst</label>
                            <input id="cst-hst-ratio" type="text" readonly>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Euler Line panel -->
        <div class="dashboard-panel">
            <h3 class="panel-header">Euler Line</h3>
            
            <!-- Points and Length Row -->
            <div class="panel-content">
                <div class="panel-row">
                    <div class="label-value-pair">
                        <label>O (xy)</label>
                        <input id="circumcenter-coords" type="text" class="coordinate-input" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>I (xy)</label>
                        <input id="centroid-coords" type="text" class="coordinate-input" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>SP (xy)</label>
                        <input id="subcenter-coords" type="text" class="coordinate-input" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>NP (xy)</label>
                        <input id="nine-point-coords" type="text" class="coordinate-input" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>HO (xy)</label>
                        <input id="orthocenter-coords" type="text" class="coordinate-input" readonly>
                    </div>
                </div>

                <!-- Slope, Angle and Ratios Row -->
                <div class="panel-row">
                    <div class="label-value-pair">
                        <label>EL</label>
                        <input id="euler-line-length" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>mEL</label>
                        <input id="euler-line-slope" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>θEL</label>
                        <input id="euler-line-angle" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>O-I/EL</label>
                        <input id="o-i-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>I-SP/EL</label>
                        <input id="i-sp-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>SP-NP/EL</label>
                        <input id="sp-np-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>NP-HO/EL</label>
                        <input id="np-ho-ratio" type="text" readonly>
                    </div>
                </div>

                <!-- NC Intersection Angles Row -->
                <div class="panel-row">
                    <div class="label-value-pair">
                        <label>NC1 θa</label>
                        <input id="nc1-acute" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>NC1 θo</label>
                        <input id="nc1-obtuse" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>NC2 θa</label>
                        <input id="nc2-acute" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>NC2 θo</label>
                        <input id="nc2-obtuse" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>NC3 θa</label>
                        <input id="nc3-acute" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>NC3 θo</label>
                        <input id="nc3-obtuse" type="text" readonly>
                    </div>
                </div>
            </div>
        </div>

        <!-- Incircle Panel -->
        <div class="dashboard-panel">
            <h3 class="panel-header">Incircle</h3>
            <div class="panel-content">
                <!-- Coordinates and Measurements Row -->
                <div class="panel-row">
                    <div class="label-value-pair">
                        <label>IN (xy)</label>
                        <input id="incenter-coords" type="text" class="coordinate-input" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>T1 (xy)</label>
                        <input id="tan1-coords" type="text" class="coordinate-input" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>T2 (xy)</label>
                        <input id="tan2-coords" type="text" class="coordinate-input" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>T3 (xy)</label>
                        <input id="tan3-coords" type="text" class="coordinate-input" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>d(I,IN)</label>
                        <input id="d-i-in" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>d(IN,ssi1)</label>
                        <input id="d-in-ssi1" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>d(IN,ssi2)</label>
                        <input id="d-in-ssi2" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>d(IN,ssi3)</label>
                        <input id="d-in-ssi3" type="text" readonly>
                    </div>
                </div>

                <!-- Incircle Ratios Row -->
                <div class="panel-row">
                    <div class="label-value-pair">
                        <label>rIN</label>
                        <input id="inradius" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>CIN</label>
                        <input id="incircle-capacity" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>HIN</label>
                        <input id="incircle-entropy" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>CIN/HIN</label>
                        <input id="cin-hin-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>HIN/CIN</label>
                        <input id="hin-cin-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>CIN/C</label>
                        <input id="cin-c-ratio" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>HIN/H</label>
                        <input id="hin-h-ratio" type="text" readonly>
                    </div>
                </div>

                <!-- Distances and Ratios Row -->
                <div class="panel-row">
                    <div class="label-value-pair">
                        <label>d(M,T)1</label>
                        <input id="d-m-t-n1" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>d(M,T)2</label>
                        <input id="d-m-t-n2" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>d(M,T)3</label>
                        <input id="d-m-t-n3" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>r(M,T)1</label>
                        <input id="r-m-t-n1" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>r(M,T)2</label>
                        <input id="r-m-t-n2" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>r(M,T)3</label>
                        <input id="r-m-t-n3" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>rNC(M,T)1</label>
                        <input id="r-m-t-nc1" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>rNC(M,T)2</label>
                        <input id="r-m-t-nc2" type="text" readonly>
                    </div>
                    <div class="label-value-pair">
                        <label>rNC(M,T)3</label>
                        <input id="r-m-t-nc3" type="text" readonly>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Legend Panel -->
    <div class="dashboard-panel">
        <h3 class="panel-header">LEGEND</h3>
        <div class="panel-content">
            <div class="row">
                <div class="col-md-3">
                    <p>∠: Angle</p>
                </div>
                <div class="col-md-3">
                    <p>θ: Intersection Angle</p>
                </div>
                <div class="col-md-3">
                    <p>∞: Undefined, null</p>
                </div>
                <div class="col-md-3">
                    <p>(xy): position, coordinates</p>
                </div>
                <div class="col-md-3">
                    <p>Af (xy): Coordinates of the Foot of the Altitude</p>
                </div>
                <div class="col-md-3">
                    <p>Al: Length of the Altitude</p>
                </div>
                <div class="col-md-3">
                    <p>a: acute angle</p>
                </div>
                <div class="col-md-3">
                    <p>B: Bits (Resource)</p>
                </div>
                <div class="col-md-3">
                    <p>C: Capacity (Area), measured in B (Bits)</p>
                </div>
                <div class="col-md-3">
                    <p>CIN: Capacity of the Incircle</p>
                </div>
                <div class="col-md-3">
                    <p>cst: Capacity of the Subtriangle</p>
                </div>
                <div class="col-md-3">
                    <p>d: distance between two points</p>
                </div>
                <div class="col-md-3">
                    <p>EL: Euler Line length</p>
                </div>
                <div class="col-md-3">
                    <p>H: Entropy (Length, Perimeter, Circumference), Total System Entropy (HP + HIC), measured in pixels</p>
                </div>
                <div class="col-md-3">
                    <p>h: Subsystem Entropy</p>
                </div>
                <div class="col-md-3">
                    <p>HIC: Intelligence Channel Entropy</p>
                </div>
                <div class="col-md-3">
                    <p>HIN: Entropy (circumference) of the Incircle</p>
                </div>
                <div class="col-md-3">
                    <p>HO: Orthocenter</p>
                </div>
                <div class="col-md-3">
                    <p>HP: System Perimeter Entropy</p>
                </div>
                <div class="col-md-3">
                    <p>hst: Entropy of the Subtriangle</p>
                </div>
                <div class="col-md-3">
                    <p>I: Centroid, Intelligence of the system</p>
                </div>
                <div class="col-md-3">
                    <p>IC: I-Channel or Intelligence Channel (distance from the centroid I to a Node N)</p>
                </div>
                <div class="col-md-3">
                    <p>IN: Incenter Point of the Incircle</p>
                </div>
                <div class="col-md-3"><div class="col-md-3">
                    <p>l: Length</p>
                </div>
                    <p>M: Midpoint (between two Nodes)</p>
                </div>
                <div class="col-md-3">
                    <p>m: slope</p>
                </div>
                <div class="col-md-3">
                    <p>ml: full Median length</p>
                </div>
                <div class="col-md-3">
                    <p>N: Node (vertex)</p>
                </div>
                <div class="col-md-3">
                    <p>NC: Node Channel (distance between two Nodes)</p>
                </div>
                <div class="col-md-3">
                    <p>NP: Nine-Point Center</p>
                </div>
                <div class="col-md-3">
                    <p>O: Circumcenter of the Circumcircle</p>
                </div>
                <div class="col-md-3">
                    <p>o: obtuse angle</p>
                </div>
                <div class="col-md-3">
                    <p>R: radius of a circle</p>
                </div>
                <div class="col-md-3">
                    <p>r: ratio</p>
                </div>
                <div class="col-md-3">
                    <p>r(M,T): ratio of d(M,T) to the perimeter HP</p>
                </div>
                <div class="col-md-3">
                    <p>rNC(M,T): ratio of d(M,T) to the NC length</p>
                </div>
                <div class="col-md-3">
                    <p>stc: Subchannel of the Subtriangle</p>
                </div>
                <div class="col-md-3">
                    <p>SP: Subcenter Point of the Subcircle</p>
                </div>
                <div class="col-md-3">
                    <p>ss: Subsystem</p>
                </div>
                <div class="col-md-3">
                    <p>ssb: Subsystem Bits (Resource)</p>
                </div>
                <div class="col-md-3">
                    <p>ssc: Subsystem Capacity (Area)</p>
                </div>
                <div class="col-md-3">
                    <p>ssh: Subsystem Entropy (Perimeter)</p>
                </div>
                <div class="col-md-3">
                    <p>ssi: Subsystem Centroid, Subtriangle Node</p>
                </div>
                <div class="col-md-3">
                    <p>st: Subtriangle</p>
                </div>
                <div class="col-md-3">
                    <p>T: Tangent point of Incircle</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Load Google API scripts first -->
<script async defer src="https://apis.google.com/js/api.js"></script>
<script async defer src="https://accounts.google.com/gsi/client"></script>

<!-- Update application scripts to use modules with exact paths -->
<script type="module" src="ss1-state/rules-module.js"></script>
<script type="module" src="ss3-io/environment-module.js"></script>
<script type="module" src="intelligence/intelligence-module.js"></script>
<script type="module" src="shared/ui/controller.js"></script>
<script type="module" src="index.js"></script>
</body>
</html>
